<html>
	<head>
    	<meta charset="UTF-8">
    	<title>Work Test</title>
    <style>
		#overlay{
		    display: none;
			position: fixed;
			top: 0%;
			left: 0%;
			width: 100%;
			height: 100%;
			
			background-color: black;
			z-index:1001;
		}

		#overlay-content{ 
			position: absolute;
			display: none;
			width: 1200px;
			height: 600px;
			padding: 16px;
			
			z-index:1002;
		}


		body{
			background-color: black;
		}
      	#menu-canvas { background-color: black; }
    </style>	
	</head>
	
	<body onload="initMainMenu()">
		<div id="overlay">
  			<img src="images/splash-image.jpg" id="overlay-content">
  			
		</div>

		<div id="main-content">
			<canvas id="menu-canvas" width="1270" height="650"></canvas>
		</div>
		<script src="js/playerType.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.0.0/pixi.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script>
			

			var p1_selected = false;
			var p2_selected = false;
			function initMainMenu() {
		    	var interactive = true;
		    	stage = new PIXI.Container(); //represents a collection of display objects as well as the stage (display object)
		    	renderer = PIXI.autoDetectRenderer( //uses WebGLRenderer by default, if fail, uses canvasRenderer
			    	document.getElementById("menu-canvas").width,
			    	document.getElementById("menu-canvas").height,
			    	{view:document.getElementById("menu-canvas")}
				);

				var logoTexture = PIXI.Texture.fromImage("images/main-logo.png");
				logo = new PIXI.Sprite(logoTexture);
				logo.position.x = 470;
				logo.position.y = 0;
				stage.addChild(logo);

				var bldgTexture = PIXI.Texture.fromImage("images/Building.png");
				bldg = new PIXI.extras.TilingSprite(
						bldgTexture, 
						1270,
	  					650
					);
				bldg.position.x = 0;
				bldg.position.y = 100;
				bldg.tilePosition.x = 0;
				bldg.tilePosition.y = 0;
				stage.addChild(bldg);

				var style = {
				    fontFamily : 'Arial',
				    fontSize : '30px',
				    
				    fontWeight : 'bold',
				    fill : 'yellow',
				    stroke : '#4a1850',
				    strokeThickness : 5,
				    wordWrap : true,
				    wordWrapWidth : 440
				};

				var richText = new PIXI.Text('Select Ship',style);
				richText.x = 550;
				richText.y = 150;

				stage.addChild(richText);

				var p1Texture = PIXI.Texture.fromImage('images/player.png');
				p1 = new PIXI.Sprite(p1Texture);
				p1.interactive = true;
				p1.alpha = 0.6;
				p1.on('mouseover', onPlayerOver).on('mouseout', onPlayerOut).on('click', p1Clicked);
				p1.position.x = 500;
				p1.position.y = 200; //540-max 400-min
				stage.addChild(p1);

				var p2Texture = PIXI.Texture.fromImage('images/player2.png');
				p2 = new PIXI.Sprite(p2Texture);
				p2.alpha = 0.6;
				p2.interactive = true;
				p2.on('mouseover', onPlayerOver).on('mouseout', onPlayerOut).on('click', p2Clicked);
				p2.position.x = 700;
				p2.position.y = 195; //540-max 400-min
				stage.addChild(p2);

				var startTexture = PIXI.Texture.fromImage('images/start-game.png');
				start = new PIXI.Sprite(startTexture);
				start.anchor.set(0.5);
				start.scale.set(0.3);
				start.interactive = true;
				start.on('mouseover', buttonMouseOver).on('mouseout', buttonMouseOut).on('click', startGame);
				start.position.x = 640;
				start.position.y = 350; //540-max 400-min
				stage.addChild(start);

				/*var exitTexture = PIXI.Texture.fromImage('images/exit.png');
				exit = new PIXI.Sprite(exitTexture);
				exit.alpha = 0.8;
				exit.interactive = true;
				exit.on('mouseover', buttonMouseOver).on('mouseout', buttonMouseOut).on('click',exitGame);
				exit.position.x = 680;
				exit.position.y = 345; //540-max 400-min
				stage.addChild(exit);*/

				requestAnimationFrame(update);
		    }

		    //------------------functions for selecting ship type---------------------
		    function onPlayerOver(event){
			    if(p1_selected==false && p2_selected == false){
			    	this.data = event.data;
			    	this.alpha = 0.8;
				}
			}

			function onPlayerOut(event){
				if(p1_selected==false && p2_selected == false){
					this.data = event.data;
			    	this.alpha = 0.6;
				}
			}

			function p1Clicked(event){
				this.data = event.data;
			    this.alpha = 1.0;

			    p1_selected = p1_selected == false ? true : false;
			    p2_selected = false;
			    localStorage.setItem("playerType",'images/player.png');
			    	    
			}

			function p2Clicked(event){
				this.data = event.data;
			    this.alpha = 1.0;

			    p2_selected = p2_selected == false ? true : false;	    
				p1_selected = false;
				localStorage.setItem("playerType",'images/player2.png');
			}
			//------------------------------------------------------------------------

			function buttonMouseOver(event){
				this.data = event.data;
				this.scale.set(0.31);
			}

			function buttonMouseOut(event){
				this.data = event.data;
				this.scale.set(0.3);
			}

			function startGame(){
				
				document.location.href = "game.html";
			}


		    function update() {	
				bldg.tilePosition.x += 0.64;

				renderer.render(stage);
				requestAnimationFrame(update);		
			}
		</script>
		<script>
			$.fn.center = function () {
			  this.css("position","absolute");
			  this.css("top", Math.max(0, (
			    ($(window).height() - $(this).outerHeight()) / 2) + 
			     $(window).scrollTop()) + "px"
			  );
			  this.css("left", Math.max(0, (
			    ($(window).width() - $(this).outerWidth()) / 2) + 
			     $(window).scrollLeft()) + "px"
			  );
			  return this;
			}

			$("#overlay").show();
			$("#overlay-content").show().center();
			

			setTimeout(function(){    
			  $("#overlay").fadeOut();
			}, 2000);
		</script>  
	</body>
</html>